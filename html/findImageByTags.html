<!DOCTYPE html>
<html>
<head>
  <title>Image Tag Search</title>
</head>
<body>
  <h2>Find Images by Tags</h2>
  <form id="search-form" onsubmit="searchImages(event)">
    <div>
      <label for="tags">Tags:</label>
      <input type="text" id="tags" name="tags" placeholder="Enter tags separated by commas" required>
    </div>
    <div>
      <label for="min-count">Minimum Count:</label>
      <input type="number" id="min-count" name="min-count" min="1" required>
    </div>
    <div>
      <button type="submit">Search</button>
    </div>
  </form>

  <script>
    function searchImages(event) {
      event.preventDefault();

      var tagsInput = document.getElementById('tags');
      var minCountInput = document.getElementById('min-count');

      var tags = tagsInput.value.trim().split(',');
      var minCount = parseInt(minCountInput.value);

      // Construct the search URL with the tags and minCount as query parameters
      var searchURL = 'https://r5lphjguqg.execute-api.us-east-1.amazonaws.com/app-prod/tags?';

      for (var i = 0; i < tags.length; i++) {
        var tagParam = 'tag' + (i + 1);
        var countParam = 'tag' + (i + 1) + 'count';
        searchURL += tagParam + '=' + encodeURIComponent(tags[i].trim()) + '&';
        searchURL += countParam + '=' + minCount + '&';
      }

      // Remove the trailing '&' character
      searchURL = searchURL.slice(0, -1);

      // Redirect the user to the search URL
      window.location.href = searchURL;
    }

    function displayImages(imageUrls) {
        var imageContainer = document.getElementById('image-container');
        imageContainer.innerHTML = '';
      
        for (var i = 0; i < imageUrls.length; i++) {
          var imageUrl = imageUrls[i];
          var convertedUrl = convertS3Url(imageUrl);
      
          var link = document.createElement('a');
          link.href = convertedUrl;
          link.target = '_blank'; // Open the link in a new tab
          link.textContent = 'Image ' + (i + 1);
      
          var br = document.createElement('br');
      
          imageContainer.appendChild(link);
          imageContainer.appendChild(br);
        }
      }
      


  </script>
</body>
</html>
